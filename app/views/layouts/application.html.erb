<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Task Manager" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <!-- Display Flash messages -->
    <% flash.each do |key, message| %>
      <div id="flash-<%= key %>" class="alert alert-<%= key == :alert ? 'danger' : 'success' %>">
        <%= message %>
      </div>
    <% end %>

    <%= yield %>

    <!-- JavaScript for auto-hide flash messages after 5 seconds -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        setTimeout(function() {
          const flashMessages = document.querySelectorAll('.alert');
          flashMessages.forEach(function(message) {
            message.style.transition = 'opacity 1s';
            message.style.opacity = '0';
            setTimeout(function() {
              message.style.display = 'none';
            }, 1000); // Wait for transition to complete before hiding
          });
        }, 5000); // Wait for 5 seconds before starting fade-out
      });
    </script>

  </body>
</html>
